#include<stdio.h>
#include<stdlib.h>
#include<string.h>
struct node{
    char data;
    struct node *next;
}*head=NULL,*n,*p,*old;
int stack_Underflow()
{
    if(head==NULL){
        return 1;
    }
    else{
        return 0;
    }
}
void push(char e)
{
       n=(struct node *)malloc(sizeof(struct node));
       n->data=e;
       n->next=head;
       head=n;
}
char pop(){
    char e;
    p=head;
    if(stack_Underflow()==1){
        printf("Stack underflow...");
        return -1;
    }
    else{
        e=p->data;
        head=head->next;
    }
    return e;
}
char Last(){
    p=head;
    while(p->next!=NULL){
        p=p->next;
    }
    return p->data;
}
void main()
{
    char S[500];
    printf("Enter the code : ");
    scanf("%s",&S);
    for(int i=0;i<strlen(S);i++){
        if(S[i]=='(' || S[i]=='{' || S[i]=='['){
            push('(');
        }
        else if((S[i]==')' && Last()=='(' )||(S[i]=='}' && Last()=='{' )||(S[i]==']' && Last()=='[' )){
            pop();
        }
    }
    if(head!=NULL){
        printf("The code is balanced");
    }
    else{
        printf("The code is not balanced");
    }
}
